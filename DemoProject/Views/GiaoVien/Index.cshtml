@using DemoProject.Entities
@using PagedList.Mvc
@model PagedList.IPagedList<tblGiaoVien>
@{
    ViewBag.Title = "Giáo Viên";
    var controller = @HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString();
}
<h2>Quản lý giáo viên</h2>
@if (Session["SUCCESS_MESSAGE"] != null)
{
    <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert">
            <i class="glyphicon glyphicon-remove"></i>
        </button>
        @Session["SUCCESS_MESSAGE"]
    </div>
    <script>
        jQuery(".alert-success").delay(2000).fadeOut(5000);
    </script>
    Session["SUCCESS_MESSAGE"] = null;
}
<p>
    @Html.ActionLink("Tạo mới", "Create")
</p>
<form action="/@controller/Index" method="get" class="form-horizontal" role="form">
    <div class="form-group form-inline">
        <label>Tìm kiếm theo họ tên:</label>
        <input name="searchString" value="@ViewBag.CurrentFilter" type="text" class="form-control" id="search">
        <button type="submit" class="btn btn-default" id="btnSearch">Tìm kiếm</button>
        <label style="margin-left:1em;">Phân trang:</label>
        <select name="itemsPerPage" id="itemsPerPage">
            @{
                var options = new int[] { 5, 10, 15 };
                foreach (var item in options)
                {
                    if (item == ViewBag.itemsPerPage)
                    {
                        <option value="@item" selected>@item</option>
                    }
                    else
                    {
                        <option value="@item">@item</option>
                    }

                }
            }
        </select>
    </div>
</form>
<div class="table-responsive">
    <table class="table">
        <tr>
            <th>
                <a href="/@controller/Index?order=MaMon&sort=@ViewBag.ReverseSort&currentFilter=@ViewBag.CurrentFilter&page=@ViewBag.CurrentPage&itemsPerPage=@ViewBag.ItemsPerPage" style="color:white">
                    Bộ môn
                </a>
            </th>
            <th>
                <a href="/@controller/Index?order=HoTen&sort=@ViewBag.ReverseSort&currentFilter=@ViewBag.CurrentFilter&page=@ViewBag.CurrentPage&itemsPerPage=@ViewBag.ItemsPerPage" style="color:white">
                    Họ Tên
                </a>
            </th>
            <th>
                Giới tinh
            </th>
            <th>
                Ngày sinh
            </th>
            <th>
                SĐT
            </th>
            <th>
                Địa chỉ
            </th>
            <th>
                <a href="/@controller/Index?order=Luong&sort=@ViewBag.ReverseSort&currentFilter=@ViewBag.CurrentFilter&page=@ViewBag.CurrentPage&itemsPerPage=@ViewBag.ItemsPerPage" style="color:white">
                    Lương
                </a>
            </th>
            <th>
                Thao tác
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.tblMonHoc.TenMon)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.HoTen)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.GT)
                </td>
                <td>
                    @string.Format("{0:dd/MM/yyyy}", item.NgaySinh)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SDT)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DiaChi)
                </td>
                <td>
                    @string.Format("{0:0,0 VNĐ}", item.Luong)
                </td>
                <td>
                    @Html.ActionLink("Sửa", "Edit", new { id = item.MaGV }) |
                    @Html.ActionLink("Chi tiết", "Details", new { id = item.MaGV }) |
                    @Html.ActionLink("Xoá", "Delete", new { id = item.MaGV })
                </td>
            </tr>
        }
    </table>
</div>
<br />
Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) của @Model.PageCount
@Html.PagedListPager(
    Model,
    page => Url.Action(
        "Index",
        new
        {
            page,
            itemsPerPage = ViewBag.ItemsPerPage,
            currentFilter = ViewBag.CurrentFilter,
            order = ViewBag.CurrentOrder,
            sort = ViewBag.CurrentSort
        }
    )
)
